function GestionarCargaElecciones(){$(".btn-ronda").on("click",function(){if($(this).hasClass("bg-success"))sessionStorage.setItem("Id_eleccion",$(this).attr("idE")),sessionStorage.setItem("Id_ronda",$(this).attr("idR")),Id_eleccion=sessionStorage.getItem("Id_eleccion"),Id_ronda=sessionStorage.getItem("Id_ronda"),AjaxCargarPapeletaActual_1(Login,Id_eleccion,Id_ronda,Id_delegado);else{var t=$(":first-child h3",this).text(),n=$(":first-child h5",this).text();swalWithBootstrapButtons.fire({title:t+" - "+n,html:"<h4>La ronda seleccionada ( "+n+" ) está <b>INACTIVA<\/b>.<\/h4>",timer:6e3,type:"info"})}})}function MensajeInicio(){parseInt(sessionStorage.getItem("Sesion_act"))<=2&&Toast.fire({target:".content-wrapper",toast:!1,type:"info",title:"INFORME DE PUESTOS EN ELECCIÓN",html:'<h5><i class="fas fa-arrow-circle-right"><\/i><b> Consejo de Administración<\/b><\/br><div class="dropdown-divider"><\/div>- 4 Miembros propietarios.<\/br><\/br><i class="fas fa-arrow-circle-right"><\/i><b> Comité de Vigilancia<\/b><\/br><div class="dropdown-divider"><\/div>- 3 Miembros propietarios<\/br> - 1 Miembro suplente por 1 año.<\/br><\/br><i class="fas fa-arrow-circle-right"><\/i><b> Comité de Educación y Bienestar Social<\/b><\/br><div class="dropdown-divider"><\/div>- 2 Miembros propietarios.<\/br><\/br><i class="fas fa-arrow-circle-right"><\/i><b> Comité de Nominaciones<\/b><\/br><div class="dropdown-divider"><\/div>- 2 Miembros propietarios.<\/br>- 1 Miembro suplente.<\/h5><\/br><\/br>',allowOutsideClick:!1,timer:1e4})}function InicializarVariables(){Id_delegado=sessionStorage.getItem("Id_delegado");Login=sessionStorage.Cedula;Uri=sessionStorage.Uri}function AjaxCargarElecciones(n,t){$.ajax({url:n+"/api/Asamblea/EleccionRonda/ListadoRondas",method:"GET",async:!0,contentType:"application/json",dataType:"json",success:function(n){var i,r;n.respuesta===0?swalWithBootstrapButtons.fire({title:"SISTEMA DE ELECCIONES",html:"<h4> No se encontraron Elecciones que cumplan las condiciones requeridas: <\/h4><\/br> <b>1 - Estado ACTIVO.<\/b><\/br><b>2 - Proceso de QUORUM finalizado.<\/b><\/b>",type:"info",confirmButtonText:"VOLVER"}):(i=[],$.each(n.ObjRondas,function(n,t){var r=$('<div class="col-md-12 col-sm-12 col-12 "><\/div>'),u=$('<div style="border: black solid 1px;" class="small-box bg-'+TipoRondaBG(t.I_estado)+' btn-ronda" idE="'+t.Id_eleccion+'" idR="'+t.Id_ronda+'"><div class="inner"><h3>'+t.Descripcion+"<\/h3><h5>"+t.Nombre+'<\/h5><\/div><div class="icon text-dark"><i class="fas fa-users"><\/i><\/div ><a href="#" style="border-top: black solid 2px;" class="small-box-footer">IR A VOTAR&nbsp;&nbsp;<i class="fas fa-arrow-circle-right"><\/i><\/a>');u.appendTo(r);i.push(r)}),r='<h5 class="mb-2 text-bold text-center" style="background-color: #8abcf1; border-radius: .25rem;"><a style="vertical-align: inherit;">LISTA DE RONDAS EXISTENTES<\/a><\/h5 >',$("#eleccionRondas").before(r),$("#eleccionRondas").append(i),t())},error:AjaxError}).done(function(){CerrarCargando()})}function TipoRondaBG(n){return n==="A"?"success":"danger"}function AjaxCargarPapeletaActual_1(n,t,i,r){var u={},f;u.Usuario=n;u.Id_eleccion=t;u.Id_ronda=i;u.Id_papeleta=0;u.Id_delegado=r;f=JSON.stringify({parametros:u});$.ajax({url:Uri+"/api/Asamblea/PapeletaRonda/PapeletaActual",method:"POST",data:f,async:!0,contentType:"application/json",dataType:"json",success:function(n){n!=="undefined"&&n!==""&&n!==null?(sessionStorage.setItem("Id_papeleta",n.Id_papeleta),sessionStorage.setItem("Num_papeletas",n.Num_papeletas),sessionStorage.setItem("Num_votos",n.Num_votos),sessionStorage.setItem("Id_voto_blanco",n.Id_voto_blanco),sessionStorage.setItem("Nombre_papeleta",n.Nombre),sessionStorage.setItem("Color_card",n.Color_card),sessionStorage.setItem("Color_background",n.Color_background),sessionStorage.setItem("Contador_papeletas",n.Contador_papeletas),redirect("Votaciones.aspx")):Toast.fire({toast:!1,type:"error",title:"CARGA DE PAPELETAS",html:"<h5>El usuario no tiene papeletas disponibles para votar. Saliendo del sistema...<\/h5><\/br>",allowOutsideClick:!0,timer:5e3}).then(function(){LimpiarRedireccionar();CerrarCargando()})},error:AjaxError}).done(function(){CerrarCargando()})}function DebugVariables(){console.log("Id_papeleta:        "+sessionStorage.getItem("Id_papeleta"));console.log("Num_papeletas:      "+sessionStorage.getItem("Num_papeletas"));console.log("Num_votos:          "+sessionStorage.getItem("Num_votos"));console.log("Id_voto_blanco:     "+sessionStorage.getItem("Id_voto_blanco"));console.log("Nombre_papeleta:    "+sessionStorage.getItem("Nombre_papeleta"));console.log("Color_card:         "+sessionStorage.getItem("Color_card"));console.log("Color_background:   "+sessionStorage.getItem("Color_background"));console.log("Contador_papeletas: "+sessionStorage.getItem("Contador_papeletas"))}function LimpiarRedireccionar(){sessionStorage.clear();redirect("Login.aspx")}var Id_eleccion,Id_ronda,Id_delegado,Login,Uri;const swalWithBootstrapButtons=Swal.mixin({customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger"},buttonsStyling:!1,confirmButtonText:"VOLVER"}),Toast=Swal.mixin({position:"center",showConfirmButton:!1});$(document).ready(function(){MensajeInicio();InicializarVariables();MostrarCargando();setTimeout(function(){AjaxCargarElecciones(Uri,GestionarCargaElecciones)},500)});